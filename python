pushd ~/
echo '开始安装python3.10.8'
sleep 5s
#安装python3.10.8依赖
echo '安装python3.10.8依赖'
apt-get install gcc g++ make cmake build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev python-openssl -y
pushd ~/
echo '正在下载python3.10.8源码'
git clone --depth=1 https://gitee.com/baihu433/python3.10.8.git
mv python3.10.8/Python-3.10.8.tar.xz ~/
rm -rf python3.10.8
rm -rf python3.10.8
#解压Python-3.10.8.tar.xz
echo '解压Python-3.10.8源码'
tar xvJf Python-3.10.8.tar.xz
rm -rf Python-3.10.8.tar.xz
rm -rf Python-3.10.8.tar.xz
#进入Python-3.10.8源码文件夹
pushd Python-3.10.8
# 开始编译python3.10.8源码
echo '开始编译python3.10.8源码'
./configure --prefix=/usr/local/python3/
echo '编译完成'
# 开始安装python3.10.8
echo '开始安装python3.10.8'
make && make install
echo '安装完成'
# 添加环境变量
echo '添加环境变量'
PATH=/usr/local/python3/bin:$PATH
#更改python2.7名称。
pushd /usr/bin
mv python python.bak
mv pip pip.bak
mv poetry poetry.bak
pushd ~/
#删除源码文件
rm -rf Python-3.10.8
rm -rf python-3.10.8
#添加软链接
ln -s /usr/local/python3/bin/python3 /usr/bin/python
ln -s /usr/local/python3/bin/pip3 /usr/bin/pip
#更换pip默认下载源，来提升下载速度
echo '更换pip下载源'
pip config set global.index-url https://pypi.mirrors.ustc.edu.cn/simple/
echo '更换完成'
echo '更新pip'
python -m pip install --upgrade pip
pip --version
echo '开始安装poetry'
curl -sSL https://install.python-poetry.org | python -
#添加软链接
ln -s ~/.local/bin/poetry /usr/bin/poetry
poetry --version
echo